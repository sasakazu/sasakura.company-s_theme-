function closeOverlay(){jQuery("html").removeClass("noscroll"),jQuery(".overlay.show").removeClass("show"),void 0!==player&&(player.pauseVideo&&player.pauseVideo(),player.pause&&player.pause())}function isTouchDevice(){return!!("ontouchstart"in window||navigator.msMaxTouchPoints)}function onYouTubePlayerAPIReady(){player=new YT.Player(VIDEO_ID,{events:{onReady:onPlayerReady}})}function onPlayerReady(a){document.getElementById("video-overlay-play-button").addEventListener("click",function(){player.playVideo()})}var KEYCODE_ESCAPE=27,VIDEO_ID="video-overlay-video",header_headroom,player,playButton=document.getElementById("video-overlay-play-button"),$featured_video=document.querySelector("#video-overlay iframe");if(null===$featured_video&&($featured_video=document.querySelector("#video-overlay video")),jQuery(document).ready(function(){jQuery('[data-action="toggle-overlay"]').click(function(a){a.preventDefault();var b=jQuery(this).attr("data-overlay-id");jQuery("html").hasClass("noscroll")?closeOverlay():(jQuery("html").addClass("noscroll"),jQuery("#"+b).addClass("show"),jQuery("#"+b+" .search-field").focus())}),jQuery(document).keyup(function(a){a.keyCode===KEYCODE_ESCAPE&&closeOverlay()}),jQuery(".header").click(function(a){0===jQuery(a.target).closest("a").length&&jQuery("html, body").animate({scrollTop:jQuery("html").offset().top})}),header_headroom=new Headroom(jQuery(".header")[0]),header_headroom.init(),header_headroom.onTop=function(){header_headroom.tolerance=Headroom.options.tolerance,header_headroom.pin()};var a=jQuery(".cover"),b=jQuery(".header .backdrop"),c=200;a.length>0&&b.lenth>0&&jQuery(window).on("scroll",function(){var d=jQuery(this).scrollTop(),e=a.offset().top;e+=a.outerHeight()/2;var f=0+(d-e+c)/c;b.css({opacity:f}),f>"1"?b.css({opacity:1}):f<"0"&&b.css({opacity:0})}),jQuery(".widget .sub-menu, .widget .children, .menu .children, .menu .sub-menu").addClass("hide").closest("li").addClass("menu-has-child").append('<div class="menu-toggle"><i class="fa fa-angle-down"></i></div>'),jQuery("body").on("click",".menu-toggle",function(a){a.stopPropagation();var b=jQuery(this);b.children(".fa-angle-down").toggleClass("fa-rotate-180"),b.siblings(".sub-menu, .children").toggleClass("hide")}),jQuery('a.swipebox[href]:not([href*="#"])').click(function(a){var b=jQuery(this);void 0!==jQuery.swipebox&&(a.preventDefault(),jQuery.swipebox([{href:b.attr("href")}]))}),jQuery('a[href*="#"]:not([href="#"]):not([href*="#comments"]):not([data-action="toggle-overlay"]):not([id^="aesop"])').click(function(){if(location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname){var a=jQuery(this.hash);if(a=a.length?a:jQuery("[name="+this.hash.slice(1)+"]"),a.length)return header_headroom.tolerance=Number.MAX_SAFE_INTEGER,header_headroom.unpin(),jQuery("html,body").animate({scrollTop:a.offset().top},500),setTimeout(function(){header_headroom.tolerance=Headroom.options.tolerance},1e3),!1}}),jQuery(".aesop-chapter-menu").length>0&&jQuery(document).on("click",".aesop-chapter-menu .scroll-nav__item a",function(){header_headroom.tolerance=Number.MAX_SAFE_INTEGER,header_headroom.unpin(),setTimeout(function(){header_headroom.tolerance=Headroom.options.tolerance},1e3)})}),$featured_video&&null!==$featured_video){$featured_video.id=VIDEO_ID;var sep="?";if(-1!==$featured_video.src.indexOf("?")&&(sep="&"),-1!==$featured_video.src.indexOf("youtube.com")){$featured_video.src+=sep+"enablejsapi=1";var tag=document.createElement("script");tag.src="https://www.youtube.com/player_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}else-1!==$featured_video.src.indexOf("vimeo.com")&&"undefined"!=typeof Vimeo?($featured_video.src+=sep+"api=1",player=new Vimeo.Player($featured_video),playButton.addEventListener("click",function(){player.play()})):$featured_video.play&&playButton.addEventListener("click",function(){$featured_video.play()})}